<html>
	<head>
		<script>
			function getDate() {
				let date = new Date();
				date.setHours(0);
				date.setMinutes(0);
				date.setSeconds(0);
				return date;
			}
			function formatTime(date) {
				return `${String(date.getHours()).padStart(2, "0")}:${String(
					date.getMinutes()
				).padStart(2, "0")}:${String(date.getSeconds()).padStart(2, "0")},000`;
			}

			function generateSrt(text, separators) {
				let srt = "";
				let count = 0;
				let separatorRegEx = new RegExp(`[${separators}]`);
				text.split(separatorRegEx).forEach(line => {
					let inTime = getDate();
					let outTime = getDate();
					inTime.setSeconds(5 * count);
					outTime.setSeconds(5 * count + 4);
					count++;
					srt += `${count}\n${formatTime(inTime)} --> ${formatTime(
						outTime
					)}\n${line.trim()}\n\n`;
				});
				return srt;
			}

			window.addEventListener("load", () => {
				document.querySelector("#doit").addEventListener("click", () => {
					let text = document.querySelector("#in").value;
					let separators = document.querySelector("#separators").value;
					document.querySelector("#out").value = generateSrt(text, separators);
				});
			});
		</script>
		<style>
			.command {
				height: 2rem;
				text-align: center;
			}
			.container {
				display: flex;
				flex-wrap: wrap;
				height: calc(100vh - 2rem);
			}
			.half {
				padding: 1rem;
				flex-grow: 1;
			}
			#in,
			#out {
				width: 100%;
				height: 100%;
			}
		</style>
	</head>
	<body>
		<div class="command">
			<label>
				Separators:
				<input id="separators" />
			</label>
			<button id="doit">Do it</button>
		</div>
		<div class="container">
			<div class="half">
				<textarea id="in"></textarea>
			</div>
			<div class="half">
				<textarea id="out"></textarea>
			</div>
		</div>
	</body>
</html>
